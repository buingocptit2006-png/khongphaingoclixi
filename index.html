<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>VÃ²ng Quay LÃ¬ XÃ¬ 2026</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    text-align:center;
    background:linear-gradient(to bottom,#8B0000,#ff0000);
    color:#FFD700;
}

h1{
    margin-top:30px;
    font-size:42px;
    text-shadow:0 0 20px gold;
}

canvas{
    margin-top:40px;
}

.pointer{
    width:0;
    height:0;
    border-left:20px solid transparent;
    border-right:20px solid transparent;
    border-top:40px solid gold; /* chá»‰ xuá»‘ng */
    margin:auto;
}

button{
    margin-top:30px;
    padding:15px 40px;
    font-size:20px;
    border:none;
    border-radius:10px;
    background:gold;
    color:red;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 0 20px gold;
}

.result{
    margin-top:30px;
    font-size:28px;
    min-height:40px;
}
</style>
</head>
<body>

<h1>ðŸ§§ VÃ²ng Quay LÃ¬ XÃ¬ 2026 ðŸ§§</h1>

<div class="pointer"></div>
<canvas id="wheel" width="420" height="420"></canvas>

<br>
<button onclick="spin()">QUAY NGAY</button>

<div class="result" id="result"></div>

<script>

const prizes = [
 {value:"5.000Ä‘", weight:50},
 {value:"10.000Ä‘", weight:35},
 {value:"20.000Ä‘", weight:14.9},
 {value:"50.000Ä‘", weight:0},
 {value:"100.000Ä‘", weight:0},
 {value:"200.000Ä‘", weight:0}
];

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

let rotation = 0;
let spinning = false;

const center = 210;
const radius = 200;
const sliceAngle = 2*Math.PI/prizes.length;

function drawWheel(){
    for(let i=0;i<prizes.length;i++){

        const start = rotation + i*sliceAngle;
        const end = start + sliceAngle;

        ctx.beginPath();
        ctx.moveTo(center,center);
        ctx.arc(center,center,radius,start,end);
        ctx.closePath();
        ctx.fillStyle = i%2==0 ? "#FFD700" : "#ff9999";
        ctx.fill();

        ctx.save();
        ctx.translate(center,center);
        ctx.rotate(start + sliceAngle/2);
        ctx.textAlign="right";
        ctx.fillStyle="red";
        ctx.font="bold 18px Arial";
        ctx.fillText(prizes[i].value, radius-20, 5);
        ctx.restore();
    }

    ctx.beginPath();
    ctx.arc(center,center,radius,0,2*Math.PI);
    ctx.lineWidth=10;
    ctx.strokeStyle="gold";
    ctx.stroke();
}

function getRandomPrize(){
    let total = prizes.reduce((sum,p)=>sum+p.weight,0);
    let rand = Math.random()*total;
    for(let p of prizes){
        if(rand < p.weight) return p.value;
        rand -= p.weight;
    }
}

function angleOf(index){
    return (3*Math.PI/2) - (index*sliceAngle + sliceAngle/2);
}

function spin(){

    if(spinning) return;
    spinning = true;

    document.getElementById("result").innerHTML="";

    let result = getRandomPrize();
    let realIndex = prizes.findIndex(p=>p.value===result);

    if(result === "5.000Ä‘"){

        let nearIndex = prizes.findIndex(p=>p.value==="200.000Ä‘");

        let targetNear = angleOf(nearIndex);
        let finalAngle = angleOf(realIndex);

        let firstSpin = 6*2*Math.PI + targetNear - (rotation % (2*Math.PI));

        animateSpin(rotation, firstSpin, 3000, () => {

            let backSpin = finalAngle - (rotation % (2*Math.PI));

            animateSpin(rotation, backSpin, 800, () => {
                document.getElementById("result").innerHTML =
                    "ðŸŽ‰ Báº¡n nháº­n Ä‘Æ°á»£c: <b>"+result+"</b>";
                spinning = false;
            });

        });

    } else {

        let target = angleOf(realIndex);
        let spinAmount = 6*2*Math.PI + target - (rotation % (2*Math.PI));

        animateSpin(rotation, spinAmount, 4000, () => {
            document.getElementById("result").innerHTML =
                "ðŸŽ‰ Báº¡n nháº­n Ä‘Æ°á»£c: <b>"+result+"</b>";
            spinning = false;
        });
    }
}

function animateSpin(start, amount, duration, callback){

    let startTime = null;

    function animate(time){
        if(!startTime) startTime = time;
        let progress = time - startTime;
        let percent = progress/duration;

        if(percent < 1){
            rotation = start + amount * easeOut(percent);
            ctx.clearRect(0,0,canvas.width,canvas.height);
            drawWheel();
            requestAnimationFrame(animate);
        } else {
            rotation = start + amount;
            ctx.clearRect(0,0,canvas.width,canvas.height);
            drawWheel();
            callback();
        }
    }

    requestAnimationFrame(animate);
}

function easeOut(t){
    return 1 - Math.pow(1-t,3);
}

drawWheel();

</script>

</body>
</html>
